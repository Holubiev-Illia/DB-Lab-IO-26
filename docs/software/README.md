# Реалізація інформаційного та програмного забезпечення

В рамках проєкту розробляється:
## SQL-скрипт для створення на початкового наповнення бази даних

```sql
-- MySQL Script generated by MySQL Workbench
-- Mon Apr 29 21:15:10 2024
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema DB-lab-IO-26
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema DB-lab-IO-26
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `DB-lab-IO-26` DEFAULT CHARACTER SET utf8 ;
USE `DB-lab-IO-26` ;

-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`permissions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`permissions` (
  `Id` INT NOT NULL,
  `Permission` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`Id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`projects`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`projects` (
  `Id` INT NOT NULL,
  `Name` VARCHAR(50) NOT NULL,
  `Description` VARCHAR(100) NOT NULL,
  `Status` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`Id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`payments`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`payments` (
  `Id` INT NOT NULL,
  `CardNumber` INT NOT NULL,
  `CardCVV` INT NOT NULL,
  `CardExpireDate` DATETIME NOT NULL,
  `Email` VARCHAR(50) NOT NULL,
  `ProjectId` INT NOT NULL,
  PRIMARY KEY (`Id`),
  INDEX `fk_payments_projects_idx` (`ProjectId` ASC) VISIBLE,
  CONSTRAINT `fk_payments_projects`
    FOREIGN KEY (`ProjectId`)
    REFERENCES `DB-lab-IO-26`.`projects` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`reles`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`reles` (
  `Id` INT NOT NULL,
  `Name` VARCHAR(30) NULL,
  PRIMARY KEY (`Id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`role_grant`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`role_grant` (
  `RoleID` INT NOT NULL,
  `PermissionId` INT NOT NULL,
  INDEX `fk_role_grant_reles1_idx` (`RoleID` ASC) VISIBLE,
  INDEX `fk_role_grant_permissions1_idx` (`PermissionId` ASC) VISIBLE,
  CONSTRAINT `fk_role_grant_reles1`
    FOREIGN KEY (`RoleID`)
    REFERENCES `DB-lab-IO-26`.`reles` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_role_grant_permissions1`
    FOREIGN KEY (`PermissionId`)
    REFERENCES `DB-lab-IO-26`.`permissions` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`reviews`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`reviews` (
  `Id` INT NOT NULL,
  `Text` VARCHAR(100) NOT NULL,
  `Rate` INT NOT NULL,
  `ProjectId` INT NOT NULL,
  PRIMARY KEY (`Id`),
  INDEX `fk_reviews_projects1_idx` (`ProjectId` ASC) VISIBLE,
  CONSTRAINT `fk_reviews_projects1`
    FOREIGN KEY (`ProjectId`)
    REFERENCES `DB-lab-IO-26`.`projects` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`tasks`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`tasks` (
  `Id` INT NOT NULL,
  `Name` VARCHAR(50) NOT NULL,
  `Developer` VARCHAR(45) NOT NULL,
  `Status` VARCHAR(20) NOT NULL,
  `Deadline` DATETIME NOT NULL,
  `ProjectId` INT NOT NULL,
  PRIMARY KEY (`Id`),
  INDEX `fk_tasks_projects1_idx` (`ProjectId` ASC) VISIBLE,
  CONSTRAINT `fk_tasks_projects1`
    FOREIGN KEY (`ProjectId`)
    REFERENCES `DB-lab-IO-26`.`projects` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`users`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`users` (
  `Id` INT NOT NULL,
  `Login` VARCHAR(45) NOT NULL,
  `Picture` MEDIUMBLOB NOT NULL,
  `Password` BLOB NOT NULL,
  `Email` VARCHAR(50) NOT NULL,
  `Role` VARCHAR(30) NOT NULL,
  PRIMARY KEY (`Id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`members`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`members` (
  `Id` INT NOT NULL,
  `RoleId` INT NOT NULL,
  `UserId` INT NOT NULL,
  PRIMARY KEY (`Id`),
  INDEX `fk_members_users1_idx` (`RoleId` ASC) VISIBLE,
  INDEX `fk_members_reles1_idx` (`UserId` ASC) VISIBLE,
  CONSTRAINT `fk_members_users1`
    FOREIGN KEY (`RoleId`)
    REFERENCES `DB-lab-IO-26`.`users` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_members_reles1`
    FOREIGN KEY (`UserId`)
    REFERENCES `DB-lab-IO-26`.`reles` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`projects_members`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`projects_members` (
  `MemberID` INT NOT NULL,
  `ProjectId` INT NOT NULL,
  INDEX `fk_projects_members_projects1_idx` (`MemberID` ASC) VISIBLE,
  INDEX `fk_projects_members_members1_idx` (`ProjectId` ASC) VISIBLE,
  CONSTRAINT `fk_projects_members_projects1`
    FOREIGN KEY (`MemberID`)
    REFERENCES `DB-lab-IO-26`.`projects` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_projects_members_members1`
    FOREIGN KEY (`ProjectId`)
    REFERENCES `DB-lab-IO-26`.`members` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`permissions`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`permissions` (`Id`, `Permission`) VALUES (1, 'Read');
INSERT INTO `DB-lab-IO-26`.`permissions` (`Id`, `Permission`) VALUES (2, 'Write');
INSERT INTO `DB-lab-IO-26`.`permissions` (`Id`, `Permission`) VALUES (3, 'Execute');

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`projects`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`projects` (`Id`, `Name`, `Description`, `Status`) VALUES (1, 'Project A', 'Description for Project A', 'Active');
INSERT INTO `DB-lab-IO-26`.`projects` (`Id`, `Name`, `Description`, `Status`) VALUES (2, 'Project B', 'Description for Project B', 'Inactive');
INSERT INTO `DB-lab-IO-26`.`projects` (`Id`, `Name`, `Description`, `Status`) VALUES (3, 'Project C', 'Description for Project C', 'Pending');

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`payments`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`payments` (`Id`, `CardNumber`, `CardCVV`, `CardExpireDate`, `Email`, `ProjectId`) VALUES (1, 123456, 123, '2024-04-26', 'payment1@example.com', 1);
INSERT INTO `DB-lab-IO-26`.`payments` (`Id`, `CardNumber`, `CardCVV`, `CardExpireDate`, `Email`, `ProjectId`) VALUES (2, 112233, 456, '2024-04-27', 'payment2@example.com', 2);
INSERT INTO `DB-lab-IO-26`.`payments` (`Id`, `CardNumber`, `CardCVV`, `CardExpireDate`, `Email`, `ProjectId`) VALUES (3, 123424, 789, '2024-04-29', 'payment3@example.com', 3);

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`reles`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`reles` (`Id`, `Name`) VALUES (1, 'Teamlead');
INSERT INTO `DB-lab-IO-26`.`reles` (`Id`, `Name`) VALUES (2, 'Developer');
INSERT INTO `DB-lab-IO-26`.`reles` (`Id`, `Name`) VALUES (3, 'Admin');

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`role_grant`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`role_grant` (`RoleID`, `PermissionId`) VALUES (1, 1);
INSERT INTO `DB-lab-IO-26`.`role_grant` (`RoleID`, `PermissionId`) VALUES (1, 2);
INSERT INTO `DB-lab-IO-26`.`role_grant` (`RoleID`, `PermissionId`) VALUES (2, 1);
INSERT INTO `DB-lab-IO-26`.`role_grant` (`RoleID`, `PermissionId`) VALUES (2, 3);
INSERT INTO `DB-lab-IO-26`.`role_grant` (`RoleID`, `PermissionId`) VALUES (3, 2);
INSERT INTO `DB-lab-IO-26`.`role_grant` (`RoleID`, `PermissionId`) VALUES (3, 3);

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`reviews`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`reviews` (`Id`, `Text`, `Rate`, `ProjectId`) VALUES (1, 'Good project!', 5, 1);
INSERT INTO `DB-lab-IO-26`.`reviews` (`Id`, `Text`, `Rate`, `ProjectId`) VALUES (2, 'Could be better', 3, 2);
INSERT INTO `DB-lab-IO-26`.`reviews` (`Id`, `Text`, `Rate`, `ProjectId`) VALUES (3, 'Excellent work', 5, 3);

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`tasks`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`tasks` (`Id`, `Name`, `Developer`, `Status`, `Deadline`, `ProjectId`) VALUES (1, 'Task 1', 'dev_user1', 'In Progress', '2024-04-25', 1);
INSERT INTO `DB-lab-IO-26`.`tasks` (`Id`, `Name`, `Developer`, `Status`, `Deadline`, `ProjectId`) VALUES (2, 'Task 2', 'dev_user2', 'To Do', '2024-04-28', 2);
INSERT INTO `DB-lab-IO-26`.`tasks` (`Id`, `Name`, `Developer`, `Status`, `Deadline`, `ProjectId`) VALUES (3, 'Task 3', 'dev_user3', 'Completed', '2024-04-29', 3);

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`users`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`users` (`Id`, `Login`, `Picture`, `Password`, `Email`, `Role`) VALUES (1, 'admin_user', admin_picture_blob, admin_password_blob, 'admin@example.com', 'Teamlead');
INSERT INTO `DB-lab-IO-26`.`users` (`Id`, `Login`, `Picture`, `Password`, `Email`, `Role`) VALUES (2, 'dev_user1', dev_picture_blob1, dev_password_blob1, 'dev1@example.com', 'Developer');
INSERT INTO `DB-lab-IO-26`.`users` (`Id`, `Login`, `Picture`, `Password`, `Email`, `Role`) VALUES (3, 'dev_user2', dev_picture_blob2, dev_password_blob2, 'dev2@example.com', 'Developer');
INSERT INTO `DB-lab-IO-26`.`users` (`Id`, `Login`, `Picture`, `Password`, `Email`, `Role`) VALUES (4, 'manager_user', manager_picture_blob, manager_password_blob, 'manager@example.com', 'Admin');

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`members`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`members` (`Id`, `RoleId`, `UserId`) VALUES (1, 1, 1);
INSERT INTO `DB-lab-IO-26`.`members` (`Id`, `RoleId`, `UserId`) VALUES (2, 2, 2);
INSERT INTO `DB-lab-IO-26`.`members` (`Id`, `RoleId`, `UserId`) VALUES (3, 2, 3);
INSERT INTO `DB-lab-IO-26`.`members` (`Id`, `RoleId`, `UserId`) VALUES (4, 3, 4);

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`projects_members`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`projects_members` (`MemberID`, `ProjectId`) VALUES (1, 1);
INSERT INTO `DB-lab-IO-26`.`projects_members` (`MemberID`, `ProjectId`) VALUES (2, 1);
INSERT INTO `DB-lab-IO-26`.`projects_members` (`MemberID`, `ProjectId`) VALUES (3, 2);
INSERT INTO `DB-lab-IO-26`.`projects_members` (`MemberID`, `ProjectId`) VALUES (4, 3);

COMMIT;

```

## RESTfull сервіс для управління даними
### Вхідний файл програми 

```ts
using Microsoft.EntityFrameworkCore;
using DBLab6.MyDBContext;
using Microsoft.OpenApi.Models;

var builder = WebApplication.CreateBuilder(args);

builder.Services.AddControllers();
builder.Services.AddEndpointsApiExplorer();
builder.Services.AddSwaggerGen(c =>
{
    c.SwaggerDoc("v1", new OpenApiInfo { Title = "Andryushka", Version = "v1" });
});

builder.Services.AddDbContext<ProjectDbContext>();

var app = builder.Build();

if (app.Environment.IsDevelopment())
{
    app.UseSwagger();
    app.UseSwaggerUI();
}

app.UseSwagger();
app.UseSwaggerUI(c =>
{
    c.SwaggerEndpoint("/swagger/v1/swagger.json", "Andryushka V1");
});

app.UseHttpsRedirection();

app.UseAuthorization();

app.MapControllers();

app.Run();
```
### CRUD для Users 
```ts
using DBLab6.MyDBContext;
using Microsoft.AspNetCore.Mvc;
using Microsoft.EntityFrameworkCore;
using System.Text;
using System;

namespace DBLab6.Controllers
{
    [ApiController]
    [Route("[controller]")]
    public class UserController : ControllerBase
    {
        private readonly ILogger<UserController> _logger;
        private readonly ProjectDbContext _context;

        public UserController(ILogger<UserController> logger, ProjectDbContext context)
        {
            _logger = logger;
            _context = context;
        }
        [HttpGet]
        public async Task<IActionResult> Get()
        {
            var users = await _context.Users.ToListAsync();
            return Ok(users);
        }
        [HttpPost]
        public async Task<IActionResult> Post(string Name, string Email, string Password, IFormFile Picture, Role.Names a)
        {
            MyDBContext.User entity = new MyDBContext.User();
            entity.Login = Name;
            entity.Email = Email;
            entity.Role = a.ToString();

            int maxId = _context.Users.Max(u => (int?)u.Id) ?? 0;
            entity.Id = maxId + 1;

            entity.Password = Encoding.UTF8.GetBytes(Password);

            MemoryStream memoryStream = new MemoryStream();
            Picture.CopyTo(memoryStream);
            entity.Picture = memoryStream.ToArray();

            await _context.Users.AddAsync(entity);
            await _context.SaveChangesAsync();

            return Ok();
        }

        [HttpDelete]
        public async Task<IActionResult> Delete(int id)
        {
            _context.Users.Remove(await _context.Users.FindAsync(id));
            await _context.SaveChangesAsync();
            return Ok();
        }
        [HttpPatch]
        public async Task<IActionResult> Update(int id, string Name, string Email, string Password, IFormFile Picture, Role.Names a)
        {
             MyDBContext.User entity = await _context.Users.FindAsync(id);
            entity.Login = Name;
            entity.Email = Email;
            entity.Role = a.ToString();
            entity.Password = Encoding.UTF8.GetBytes(Password);

            MemoryStream memoryStream = new MemoryStream();
            Picture.CopyTo(memoryStream);
            entity.Picture = memoryStream.ToArray();
            _context.Entry(entity).State = EntityState.Modified;
            await _context.SaveChangesAsync();

            return Ok();
        }
    }
}
```
### Репозиторій бази даних
```ts
using System;
using System.Collections.Generic;
using Microsoft.EntityFrameworkCore;

namespace DBLab6.MyDBContext;

public partial class ProjectDbContext : DbContext
{
    public ProjectDbContext()
    {
    }

    public ProjectDbContext(DbContextOptions<ProjectDbContext> options)
        : base(options)
    {
    }

    public virtual DbSet<Member> Members { get; set; }

    public virtual DbSet<Payment> Payments { get; set; }

    public virtual DbSet<Permission> Permissions { get; set; }

    public virtual DbSet<Project> Projects { get; set; }

    public virtual DbSet<ProjectsMember> ProjectsMembers { get; set; }

    public virtual DbSet<Review> Reviews { get; set; }

    public virtual DbSet<Role> Roles { get; set; }

    public virtual DbSet<RoleGrant> RoleGrants { get; set; }

    public virtual DbSet<Task> Tasks { get; set; }

    public virtual DbSet<User> Users { get; set; }

    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
#warning To protect potentially sensitive information in your connection string, you should move it out of source code. You can avoid scaffolding the connection string by using the Name= syntax to read it from configuration - see https://go.microsoft.com/fwlink/?linkid=2131148. For more guidance on storing connection strings, see http://go.microsoft.com/fwlink/?LinkId=723263.
        => optionsBuilder.UseMySql("server=localhost;port=3306;database=project_db;uid=root;password=Admin12345", Microsoft.EntityFrameworkCore.ServerVersion.Parse("8.0.35-mysql"));

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        modelBuilder
            .UseCollation("utf8mb4_0900_ai_ci")
            .HasCharSet("utf8mb4");

        modelBuilder.Entity<Member>(entity =>
        {
            entity.HasKey(e => e.Id).HasName("PRIMARY");

            entity.ToTable("members");

            entity.HasIndex(e => e.Id, "Id").IsUnique();

            entity.HasIndex(e => e.RoleId, "roleFK_idx");

            entity.HasIndex(e => e.UserId, "userFK_idx");

            entity.HasOne(d => d.Role).WithMany(p => p.Members)
                .HasForeignKey(d => d.RoleId)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("roleFK");

            entity.HasOne(d => d.User).WithMany(p => p.Members)
                .HasForeignKey(d => d.UserId)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("userFK");
        });

        modelBuilder.Entity<Payment>(entity =>
        {
            entity.HasKey(e => e.Id).HasName("PRIMARY");

            entity.ToTable("payments");

            entity.HasIndex(e => e.Id, "Id").IsUnique();

            entity.HasIndex(e => e.ProjectId, "ProjectId");

            entity.Property(e => e.CardCvv).HasColumnName("CardCVV");
            entity.Property(e => e.CardExpireDate).HasColumnType("datetime");
            entity.Property(e => e.Email).HasMaxLength(50);

            entity.HasOne(d => d.Project).WithMany(p => p.Payments)
                .HasForeignKey(d => d.ProjectId)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("payments_ibfk_1");
        });

        modelBuilder.Entity<Permission>(entity =>
        {
            entity.HasKey(e => e.Id).HasName("PRIMARY");

            entity.ToTable("permissions");

            entity.HasIndex(e => e.Id, "Id").IsUnique();

            entity.Property(e => e.Permission1)
                .HasMaxLength(50)
                .HasColumnName("Permission");
        });

        modelBuilder.Entity<Project>(entity =>
        {
            entity.HasKey(e => e.Id).HasName("PRIMARY");

            entity.ToTable("projects");

            entity.HasIndex(e => e.Id, "Id").IsUnique();

            entity.Property(e => e.Description).HasMaxLength(100);
            entity.Property(e => e.Name).HasMaxLength(50);
            entity.Property(e => e.Status).HasMaxLength(20);
        });

        modelBuilder.Entity<ProjectsMember>(entity =>
        {
            entity
                .HasNoKey()
                .ToTable("projects_members");

            entity.HasIndex(e => e.MemberId, "MemberId");

            entity.HasIndex(e => e.ProjectId, "ProjectId");

            entity.HasOne(d => d.Member).WithMany()
                .HasForeignKey(d => d.MemberId)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("projects_members_ibfk_2");

            entity.HasOne(d => d.Project).WithMany()
                .HasForeignKey(d => d.ProjectId)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("projects_members_ibfk_1");
        });

        modelBuilder.Entity<Review>(entity =>
        {
            entity.HasKey(e => e.Id).HasName("PRIMARY");

            entity.ToTable("reviews");

            entity.HasIndex(e => e.Id, "Id").IsUnique();

            entity.HasIndex(e => e.ProjectId, "ProjectId");

            entity.Property(e => e.Text).HasMaxLength(100);

            entity.HasOne(d => d.Project).WithMany(p => p.Reviews)
                .HasForeignKey(d => d.ProjectId)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("reviews_ibfk_1");
        });

        modelBuilder.Entity<Role>(entity =>
        {
            entity.HasKey(e => e.Id).HasName("PRIMARY");

            entity.ToTable("roles");

            entity.HasIndex(e => e.Id, "Id").IsUnique();

            entity.HasIndex(e => e.Name, "Name").IsUnique();

            entity.Property(e => e.Name).HasMaxLength(30);
        });

        modelBuilder.Entity<RoleGrant>(entity =>
        {
            entity
                .HasNoKey()
                .ToTable("role_grant");

            entity.HasIndex(e => e.PermissionId, "PermissionId");

            entity.HasIndex(e => e.RoleId, "RoleId");

            entity.HasOne(d => d.Permission).WithMany()
                .HasForeignKey(d => d.PermissionId)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("role_grant_ibfk_2");

            entity.HasOne(d => d.Role).WithMany()
                .HasForeignKey(d => d.RoleId)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("role_grant_ibfk_1");
        });

        modelBuilder.Entity<Task>(entity =>
        {
            entity.HasKey(e => e.Id).HasName("PRIMARY");

            entity.ToTable("tasks");

            entity.HasIndex(e => e.Id, "Id").IsUnique();

            entity.HasIndex(e => e.ProjectId, "ProjectId");

            entity.Property(e => e.Deadline).HasColumnType("datetime");
            entity.Property(e => e.Developer).HasMaxLength(45);
            entity.Property(e => e.Name).HasMaxLength(50);
            entity.Property(e => e.Status).HasMaxLength(20);

            entity.HasOne(d => d.Project).WithMany(p => p.Tasks)
                .HasForeignKey(d => d.ProjectId)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("tasks_ibfk_1");
        });

        modelBuilder.Entity<User>(entity =>
        {
            entity.HasKey(e => e.Id).HasName("PRIMARY");

            entity.ToTable("users");

            entity.HasIndex(e => e.Email, "Email").IsUnique();

            entity.HasIndex(e => e.Id, "Id").IsUnique();

            entity.HasIndex(e => e.Login, "Login").IsUnique();

            entity.Property(e => e.Email).HasMaxLength(50);
            entity.Property(e => e.Login).HasMaxLength(45);
            entity.Property(e => e.Password).HasColumnType("blob");
            entity.Property(e => e.Picture).HasColumnType("mediumblob");
            entity.Property(e => e.Role).HasMaxLength(30);
        });

        OnModelCreatingPartial(modelBuilder);
    }

    partial void OnModelCreatingPartial(ModelBuilder modelBuilder);
}

```
### Сутності
```ts
using System;
using System.Collections.Generic;

namespace DBLab6.MyDBContext;

public partial class Member
{
    public int Id { get; set; }

    public int RoleId { get; set; }

    public int UserId { get; set; }

    public virtual Role Role { get; set; } = null!;

    public virtual User User { get; set; } = null!;
}

```
```ts
using System;
using System.Collections.Generic;

namespace DBLab6.MyDBContext;

public partial class Payment
{
    public int Id { get; set; }

    public int CardNumber { get; set; }

    public int CardCvv { get; set; }

    public DateTime CardExpireDate { get; set; }

    public string Email { get; set; } = null!;

    public int ProjectId { get; set; }

    public virtual Project Project { get; set; } = null!;
}

```
```ts
using System;
using System.Collections.Generic;

namespace DBLab6.MyDBContext;

public partial class Permission
{
    public int Id { get; set; }

    public string Permission1 { get; set; } = null!;
}

```
```ts
using System;
using System.Collections.Generic;

namespace DBLab6.MyDBContext;

public partial class Project
{
    public int Id { get; set; }

    public string Name { get; set; } = null!;

    public string Description { get; set; } = null!;

    public string Status { get; set; } = null!;

    public virtual ICollection<Payment> Payments { get; set; } = new List<Payment>();

    public virtual ICollection<Review> Reviews { get; set; } = new List<Review>();

    public virtual ICollection<Task> Tasks { get; set; } = new List<Task>();
}

```
```ts
using System;
using System.Collections.Generic;

namespace DBLab6.MyDBContext;

public partial class ProjectsMember
{
    public int MemberId { get; set; }

    public int ProjectId { get; set; }

    public virtual Member Member { get; set; } = null!;

    public virtual Project Project { get; set; } = null!;
}

```
```ts
using System;
using System.Collections.Generic;

namespace DBLab6.MyDBContext;

public partial class Review
{
    public int Id { get; set; }

    public string Text { get; set; } = null!;

    public int Rate { get; set; }

    public int ProjectId { get; set; }

    public virtual Project Project { get; set; } = null!;
}

```
```ts
using System;
using System.Collections.Generic;

namespace DBLab6.MyDBContext;

public partial class Role
{
    public int Id { get; set; }

    public string? Name { get; set; }
    public enum Names
    {
        Admin,
        Developer,
        Teamlead
    }

    public virtual ICollection<Member> Members { get; set; } = new List<Member>();
}

```
```ts
using System;
using System.Collections.Generic;

namespace DBLab6.MyDBContext;

public partial class RoleGrant
{
    public int RoleId { get; set; }

    public int PermissionId { get; set; }

    public virtual Permission Permission { get; set; } = null!;

    public virtual Role Role { get; set; } = null!;
}

```
```ts
using System;
using System.Collections.Generic;

namespace DBLab6.MyDBContext;

public partial class Task
{
    public int Id { get; set; }

    public string Name { get; set; } = null!;

    public string Developer { get; set; } = null!;

    public string Status { get; set; } = null!;

    public DateTime Deadline { get; set; }

    public int ProjectId { get; set; }

    public virtual Project Project { get; set; } = null!;
}

```
```ts
using System;
using System.Collections.Generic;

namespace DBLab6.MyDBContext;

public partial class User
{
    public int Id { get; set; }

    public string Login { get; set; } = null!;

    public byte[] Picture { get; set; } = null!;

    public byte[] Password { get; set; } = null!;

    public string Email { get; set; } = null!;

    public string Role { get; set; } = null!;

    public virtual ICollection<Member> Members { get; set; } = new List<Member>();
}

```
